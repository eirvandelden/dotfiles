#!/usr/bin/env bash
# packages.conf
#
# Purpose:
# - This file is the single source of truth for what the installer should install.
# - It is sourced by `install.sh`, so it must be valid bash.
#
# Strategy (high level):
# - Prefer Homebrew on all platforms (macOS + Linux).
# - Fall back to native package managers only when a package is not available via brew:
#   - SteamOS / Arch: yay (AUR + repos)
#   - Debian-based: apt
#
# Sections:
# - BREW: packages installed via brew on all systems
# - BREW_MACOS: packages installed via brew on macOS only (often casks, but can be formulae)
# - BREW_LINUX: packages installed via brew on Linux only
# - AUR: packages installed via yay on Arch/SteamOS only
# - APT: packages installed via apt on Debian-based only
# - FLATPAK: flatpak app IDs installed via flatpak on Linux only
# - RUBY_GEMS: gems installed after Ruby is installed
# - NPM_PACKAGES: global npm packages installed after Node is installed
# - STOW: stow packages to apply from the repo root (e.g. `stow neovim`)
#
# Notes:
# - Keep package names aligned with the relevant manager:
#   - brew: formula or cask token (use what `brew install <name>` accepts)
#   - yay: package name as `yay -S <name>` accepts
#   - apt: package name as `apt-get install <name>` accepts
#   - flatpak: application IDs, e.g. `com.discordapp.Discord` (remote defaults to flathub in installer)
# - Keep lists idempotent: duplicates are harmless but noisy.
# - Prefer adding platform-specific packages to the platform section rather than relying on installer heuristics.

###############################################################################
# Homebrew (all systems)
###############################################################################

BREW=(
  # Essentials
  git
  curl
  wget
  stow
  1password-cli

  # Shell / terminal tooling
  zsh
  fzf
  ripgrep

  # Editors / dev
  zed
  neovim
  bat

  # Ruby/Node build tooling used by runtime install steps
  rv
  node-build
  chnode

  # Optional but commonly useful
  htop
  unzip
  zip
)

###############################################################################
# Homebrew (macOS only)
###############################################################################

BREW_MACOS=(
  # Example macOS-only formulae/casks. Keep this list intentional.
  # terminal-notifier
  # pinentry-mac
)

###############################################################################
# Homebrew (Linux only)
###############################################################################

BREW_LINUX=(
  # Put Linuxbrew-only packages here if you have any.

  # SteamOS dev UX helpers (generally available via brew on Linux)
  # Note: Hyprland stack itself is installed via AUR below.
  #
  # If you already installed Ghostty via brew, this ensures itâ€™s present on SteamOS too.
  ghostty
)

###############################################################################
# Native packages (Arch/SteamOS only)
###############################################################################

AUR=(
  # Put packages that are not available via brew here.
  # Examples:
  1password
  # 1password-cli

  # SteamOS "Game Mode Hyprland" session requirements (compositor stack + utilities)
  #
  # Compositor & session
  hyprland
  xdg-desktop-portal-hyprland
  xorg-xwayland

  # Polkit agent (Hyprland config attempts common agents; ensure at least one exists)
  polkit-gnome

  # Wayland utilities
  wl-clipboard
  grim
  slurp
  mako
  wofi

  # Nested compositor support (SteamOS usually has gamescope, but ensure it)
  gamescope
)

###############################################################################
# Native packages (Debian-based only)
###############################################################################

APT=(
  # Put packages that are not available via brew here.
  # Examples:
  # build-essential
  # ca-certificates
)

###############################################################################
# Flatpak (Linux only)
###############################################################################
# List Flatpak application IDs to install (default remote is flathub).
# Examples:
# - com.discordapp.Discord
# - com.spotify.Client
# - org.telegram.desktop
#
# Note: The installer should ensure flathub remote exists and install with --user.

FLATPAK=(
  # Browser (preferred on SteamOS for stability)
  com.microsoft.Edge
)

###############################################################################
# Ruby gems
###############################################################################

RUBY_GEMS=(
  brakeman
  bundler
  bundler-audit
  debug
  foreman
  guard
  guard-compat
  guard-minitest
  guard-rspec
  guard-rubocop
  kamal
  lefthook
  rails-erd
  rubocop
  rubocop-capybara
  rubocop-factory_bot
  rubocop-obsession
  rubocop-packaging
  rubocop-performance
  rubocop-rails
  rubocop-rails-omakase
  rubocop-rspec
  rubocop-rspec_rails
  ruby-lsp
  ruby-lsp-rails
  solargraph
  solargraph-rails
  yard
  yard-activesupport-concern
  yard-solargraph
)

###############################################################################
# Node global packages
###############################################################################

NPM_PACKAGES=(
  cspell
  eslint
  @herb-tools/linter
  yarn
)

###############################################################################
# Stow packages
###############################################################################
# Each item must match a directory name at the repo root (e.g. `./<name>`).
# The installer will run: `stow <name>` from the repository root.

STOW=(
  1password
  # Avante is a neovim plugin to gain access to AI
  avante
  bundler
  caddy
  cspell
  ghostty
  git
  github
  hyprland
  lazygit
  lefthook
  neovim
  node
  pumadev
  ruby
  rubocop
  solargraph
  ssh
  tones
  vim
  zed
  zsh
)
